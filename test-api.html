<!DOCTYPE html>
<html>

<head>
    <title>API Test</title>
</head>

<body>
    <h1>Gemini API Test</h1>
    <button onclick="testAPI()">Test API</button>
    <pre id="result"></pre>

    <script type="module">
        async function testAPI() {
            const result = document.getElementById('result');
            result.textContent = 'Testing...';

            try {
                const apiKey = 'AIzaSyDPurkKU9eFq2vUkdl4X9LqUmcYpNtZguo';

                const response = await fetch(
                    `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`,
                    {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{
                                    text: 'Say "Hello, API is working!" in JSON format: {"message": "your message here"}'
                                }]
                            }]
                        })
                    }
                );

                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`API Error ${response.status}: ${errorText}`);
                }

                const data = await response.json();
                result.textContent = 'SUCCESS!\n\n' + JSON.stringify(data, null, 2);

            } catch (error) {
                result.textContent = 'ERROR!\n\n' + error.message + '\n\n' + error.stack;
            }
        }

        window.testAPI = testAPI;
    </script>
</body>

</html>